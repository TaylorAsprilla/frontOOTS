<!-- Topbar Start -->
<div class="navbar-custom">
  <div class="container-fluid">
    <ul class="list-unstyled topnav-menu float-end mb-0">
      <!-- search menu -->
      <li class="d-none d-lg-block">
        <form class="app-search">
          <div class="app-search-box" ngbDropdown placement="bottom-start">
            <div class="input-group">
              <input type="search" class="form-control" [placeholder]="'app.search' | transloco" id="topSearch"
                ngbDropdownToggle />
              <button class="btn input-group-text" type="submit">
                <i class="fe-search"></i>
              </button>
            </div>
            <div class="dropdown-lg noti-dropdown" aria-labelledby="topSearch" ngbDropdownMenu>
              <!-- item-->
              <div class="dropdown-header noti-title">
                <h5 class="text-overflow mb-2">Found 22 results</h5>
              </div>

              <!-- item-->
              @for (result of searchResults; track result) {
              <a ngbDropdownItem href="javascript:void(0);" class="notify-item">
                <i class="{{ result.icon }} me-1"></i>
                <span>{{ result.text }}</span>
              </a>
              }

              <!-- item-->
              <div class="dropdown-header noti-title">
                <h6 class="text-overflow mb-2 text-uppercase">Users</h6>
              </div>

              <div class="notification-list">
                <!-- item -->
                @for (user of searchUsers; track user) {
                <a ngbDropdownItem href="javascript:void(0);" class="notify-item">
                  <div class="d-flex align-items-start">
                    <img class="d-flex me-2 rounded-circle" [src]="user.profile" [alt]="user.name" height="32" />
                    <div class="w-100">
                      <h5 class="m-0 font-14">{{ user.name }}</h5>
                      <span class="font-12 mb-0">{{ user.position }}</span>
                    </div>
                  </div>
                </a>
                }
              </div>
            </div>
          </div>
        </form>
      </li>




      <li class="d-inline-block d-lg-none" ngbDropdown placement="bottom-start">
        <a class="nav-link arrow-none waves-effect waves-light" href="javascript:void(0);" role="button"
          ngbDropdownToggle>
          <i class="fe-search noti-icon"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-end dropdown-lg p-0 noti-dropdown" ngbDropdownMenu>
          <div class="p-3">
            <input type="text" class="form-control" [placeholder]="'app.search' | transloco" aria-label="Buscar" />
          </div>
        </div>
      </li>

      <!-- full screen button -->
      <li class="dropdown d-none d-lg-inline-block">
        <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light maximize-icon" href="javascript:void(0);"
          (click)="toggleFullScreen()" [title]="'navigation.fullScreen' | transloco"
          [attr.aria-label]="'navigation.fullScreen' | transloco">
          <i class="fe-maximize noti-icon"></i>
        </a>
      </li>

      <!-- language switcher -->
      <li class="dropdown d-none d-sm-inline-block">
        <app-language-switcher></app-language-switcher>
      </li>

      <li class="notification-list topbar-dropdown" ngbDropdown>
        <a class="nav-link waves-effect waves-light" href="javascript:void(0)" role="button" ngbDropdownToggle>
          <i class="fe-bell noti-icon"></i>
          <span class="badge bg-danger rounded-circle noti-icon-badge">9</span>
        </a>
        <div class="dropdown-menu-end dropdown-lg" ngbDropdownMenu>
          <!-- item-->
          <div class="dropdown-item noti-title">
            <h5 class="m-0">
              <span class="float-end">
                <a href="javascript:void(0);" class="text-dark">
                  <small>{{ 'navigation.clearAll' | transloco }}</small>
                </a> </span>{{ 'navigation.notifications' | transloco }}
            </h5>
          </div>

          <ngx-simplebar class="noti-scroll">
            <!-- item -->
            @for (item of notificationList; track item) {
            <a [routerLink]="[]" class="notify-item" [class.active]="item.isActive" ngbDropdownItem>
              @if (item.avatar) {
              <div class="notify-icon">
                <img [src]="item.avatar" class="img-fluid rounded-circle" alt="" />
              </div>
              } @if (item.icon) {
              <div class="notify-icon bg-{{ item.bgColor }}">
                <i [class]="item.icon"></i>
              </div>
              }
              <p class="notify-details">{{ item.text }}</p>
              <p class="text-muted mb-0 user-msg">
                <small>{{ item.subText }}</small>
              </p>
            </a>
            }
          </ngx-simplebar>

          <!-- All-->
          <a href="javascript:void(0);" class="dropdown-item text-center text-primary notify-item notify-all">
            {{ 'navigation.viewAll' | transloco }}
            <i class="fe-arrow-right"></i>
          </a>
        </div>
      </li>

      <!-- profile menu -->
      <li class="dropdown notification-list topbar-dropdown" ngbDropdown>
        <a ngbDropdownToggle class="nav-link nav-user me-0 waves-effect waves-light" id="profileMenuDropdown"
          href="javascript:void(0)" aria-expanded="false">
          <span class="account-user-avatar">
            <img [src]="loggedInUser.avatar || 'assets/images/users/user-1.jpg'" alt="user-image"
              class="rounded-circle" />
          </span>
          <span class="pro-user-name ms-1"> {{ loggedInUser.firstName }} <i class="mdi mdi-chevron-down"></i> </span>
        </a>
        <div ngbDropdownMenu aria-labelledby="profileMenuDropdown" class="dropdown-menu-end profile-dropdown">
          <!-- item -->
          <div ngbDropdownItem class="dropdown-header noti-title">
            <h6 class="text-overflow m-0">
              {{ loggedInUser.firstName }} {{ loggedInUser.firstLastName }}
            </h6>
            <p class="text-muted mb-0">
              <small>{{ loggedInUser.email }}</small>
            </p>
          </div>
          <!-- item -->
          @for (option of profileOptions; track option) {
          <a class="dropdown-item notify-item" [routerLink]="option.redirectTo" ngbDropdownItem>
            <i class="{{ option.icon }} me-1"></i>
            <span>{{ option.label | transloco }}</span>
          </a>
          }
        </div>
      </li>

      <!-- right menu button -->
      <li class="dropdown notification-list">
        <a href="javascript:void(0);" class="nav-link right-bar-toggle waves-effect waves-light"
          (click)="toggleRightSidebar()" [title]="'navigation.settings' | transloco"
          [attr.aria-label]="'navigation.openSettings' | transloco">
          <i class="fe-settings noti-icon"></i>
        </a>
      </li>
    </ul>

    <!-- LOGO -->
    <div class="logo-box">
      <a [routerLink]="['/dashboard/dashboard-1']" class="logo logo-dark text-center">
        <span class="logo-sm">
          <img src="assets/images/logo-sm.png" alt="Logo SM" height="50" />
        </span>
        <span class="logo-lg">
          @if (layoutType !== 'two-column') {
          <img src="assets/images/logo-dark.png" alt="Logo Dark" height="50" />
          } @if (layoutType === 'two-column') {
          <img src="assets/images/logo-dark-2.png" alt="Logo Dark 2" height="50" />
          }
        </span>
      </a>

      <a [routerLink]="['/dashboard/dashboard-1']" class="logo logo-light text-center">
        <span class="logo-sm">
          <img src="assets/images/logo-sm.png" alt="Logo SM" height="50" />
        </span>
        <span class="logo-lg">
          @if (layoutType !== 'two-column') {
          <img src="assets/images/logo-light.png" alt="Logo Light" height="50" />
          } @if (layoutType === 'two-column') {
          <img src="assets/images/logo-light-2.png" alt="Logo Light 2" height="50" />
          }
        </span>
      </a>
    </div>

    <ul class="list-unstyled topnav-menu topnav-menu-left m-0">
      <li>
        @if (layoutType !== 'horizontal') {
        <button class="button-menu-mobile waves-effect waves-light d-none d-lg-block" (click)="changeSidebarWidth()">
          <i class="fe-menu"></i>
        </button>
        }
      </li>

      <li>
        @if (layoutType !== 'horizontal') {
        <button class="button-menu-mobile open-left d-block d-lg-none waves-effect waves-light"
          (click)="toggleMobileMenu($event)">
          <i class="fe-menu"></i>
        </button>
        }
      </li>

      <li>
        <!-- Mobile menu toggle (Horizontal Layout)-->
        @if (layoutType === 'horizontal') {
        <a class="navbar-toggle nav-link" [class.open]="topnavCollapsed" (click)="toggleMobileMenu($event)"
          href="javascript:void(0);">
          <div class="lines">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </a>
        }
        <!-- End mobile menu toggle-->
      </li>
    </ul>
    <div class="clearfix"></div>
  </div>
</div>
<!-- end Topbar -->