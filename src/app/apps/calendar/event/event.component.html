<ng-template #content let-modal>
  <div class="modal-header py-3 px-4 border-bottom-0 d-block">
    <button
      type="button"
      class="btn-close float-end"
      aria-label="Close"
      (click)="modal.dismiss('')"
    ></button>
    <h5 class="modal-title" id="modal-title">{{ modelTitle }}</h5>
  </div>
  <div class="modal-body px-4 pb-4 pt-0">
    <form
      class="needs-validation"
      name="event-form"
      id="form-event"
      (ngSubmit)="eventForm.submitted && saveEvent()"
      #eventForm="ngForm"
      >
      <div class="row">
        <div class="col-12">
          <div class="mb-3">
            <label class="form-label">Descripción</label>
            <input
              class="form-control"
              placeholder="Descripción de la cita"
              type="text"
              name="title"
              id="event-title"
              required
              [(ngModel)]="event.title"
              #title="ngModel"
              [ngClass]="{
                'is-invalid':
                  eventForm.submitted &&
                  title.invalid &&
                  (title.dirty || title.touched)
              }"
              />

            @if (
              eventForm.submitted &&
              title.invalid &&
              (title.dirty || title.touched)
              ) {
              <div
                class="invalid-feedback"
                >
                La descripción es requerida
              </div>
            }
          </div>
        </div>
        <div class="col-12">
          <div class="mb-3">
            <label class="form-label">Categoría</label>
            <select
              class="form-select"
              name="category"
              id="event-category"
              required
              [(ngModel)]="event.category"
              #category="ngModel"
              [ngClass]="{
                'is-invalid':
                  eventForm.submitted &&
                  category.invalid &&
                  (category.dirty || category.touched)
              }"
              >
              <option value="bg-danger" selected>Participante</option>
              <option value="bg-success">Reunión</option>
              <option value="bg-primary">Seguimiento</option>
              <option value="bg-info">Documentación</option>
            </select>
            @if (
              eventForm.submitted &&
              category.invalid &&
              (category.dirty || category.touched)
              ) {
              <div
                class="invalid-feedback"
                >
                Seleccione la categoría
              </div>
            }
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-6 col-4">
          @if (modelTitle === 'Edit Event') {
            <button
              type="button"
              class="btn btn-danger"
              (click)="deleteEvent()"
              id="btn-delete-event"
              >
              Eliminar
            </button>
          }
        </div>
        <div class="col-md-6 col-8 text-end">
          <button
            type="button"
            class="btn btn-light me-1"
            (click)="modal.dismiss('')"
            >
            Cerrar
          </button>
          <button
            type="submit"
            class="btn btn-success"
            id="btn-save-event"
            [disabled]="!eventForm.form.valid"
            >
            Guardar
          </button>
        </div>
      </div>
    </form>
  </div>
</ng-template>
